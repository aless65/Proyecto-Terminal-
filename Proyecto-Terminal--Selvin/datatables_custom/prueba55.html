<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="#" />
    <title>Tutorial DataTables</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="main.css">

    <!--datables CSS básico-->
    <link rel="stylesheet" type="text/css" href="datatables/datatables.min.css" />
    <!--datables estilo bootstrap 4 CSS-->
    <link rel="stylesheet" type="text/css" href="datatables/DataTables-1.10.18/css/dataTables.bootstrap4.min.css">

    <!--font awesome con CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>

</head>

<body>

    <table id="myTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Country</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>John</td>
                <td>25</td>
                <td>USA</td>
            </tr>
            <tr>
                <td>Jane</td>
                <td>30</td>
                <td>Canada</td>
            </tr>
            <tr>
                <td>Bob</td>
                <td>20</td>
                <td>Australia</td>
            </tr>
        </tbody>
    </table>


    <button id="exportButton">Export to PDF</button>

    <div id="confirmationModal" style="display: none;">
        <p>Are you sure you want to compress the PDF?</p>
        <button id="confirmButton">Yes</button>
        <button id="cancelButton">No</button>
    </div>

    <script>
        $(document).ready(function() {
            $('#myTable').DataTable();

            $('#previewButton').click(function() {
                var pdf = new jsPDF();
                pdf.autoTable({
                    html: '#myTable'
                });
                pdf.output('dataurlnewwindow');
            });

            $('#exportButton').click(function() {
                $('#confirmationModal').show();
            });

            $('#cancelButton').click(function() {
                $('#confirmationModal').hide();
            });

            $('#confirmButton').click(function() {
                var pdf = new jsPDF();
                pdf.autoTable({
                    html: '#myTable'
                });

                var pdfData = pdf.output();
                var compressedData = LZString.compressToBase64(pdfData);

                var downloadLink = document.createElement("a");
                downloadLink.download = "table.pdf";
                downloadLink.href = "data:application/pdf;base64," + compressedData;
                downloadLink.click();

                $('#confirmationModal').hide();
            });
        });
    </script>
    <!-- jQuery, Popper.js, Bootstrap JS -->
    <script src="jquery/jquery-3.3.1.min.js"></script>
    <script src="popper/popper.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <!-- datatables JS -->
    <script type="text/javascript" src="datatables/datatables.min.js"></script>

    <!-- para usar botones en datatables JS -->
    <script src="datatables/Buttons-1.5.6/js/dataTables.buttons.min.js"></script>
    <script src="datatables/JSZip-2.5.0/jszip.min.js"></script>
    <script src="datatables/pdfmake-0.1.36/pdfmake.min.js"></script>
    <script src="datatables/pdfmake-0.1.36/vfs_fonts.js"></script>
    <script src="datatables/Buttons-1.5.6/js/buttons.html5.min.js"></script>

    <!-- código JS propìo-->
    <script type="text/javascript" src="main.js"></script>

    <button id="previewButton">Preview</button>

    <button id="exportButton">Export to PDF</button>

    <div id="confirmationModal" style="display: none;">
        <p>Are you sure you want to compress the PDF?</p>
        <button id="confirmButton">Yes</button>
        <button id="cancelButton">No</button>
    </div>

    <script>
        $(document).ready(function() {
            $('#myTable').DataTable();

            $('#previewButton').click(function() {
                var pdf = new jsPDF();
                pdf.autoTable({
                    html: '#myTable'
                });
                pdf.output('dataurlnewwindow');
            });

            $('#exportButton').click(function() {
                $('#confirmationModal').show();
            });

            $('#cancelButton').click(function() {
                $('#confirmationModal').hide();
            });

            $('#confirmButton').click(function() {
                var pdf = new jsPDF();
                pdf.autoTable({
                    html: '#myTable'
                });

                var pdfData = pdf.output();
                var compressedData = LZString.compressToBase64(pdfData);

                var downloadLink = document.createElement("a");
                downloadLink.download = "table.pdf";
                downloadLink.href = "data:application/pdf;base64," + compressedData;
                downloadLink.click();

                $('#confirmationModal').hide();
            });
        });
    </script>

</body>

</html>